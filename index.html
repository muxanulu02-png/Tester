<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–Ω–∞–∂–µ—Ä –¥–ª—è —Å–µ—Å—Å–∏–∏ - –í—ã–±–æ—Ä —Ç–µ—Å—Ç–∞</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }

        .content {
            padding: 30px;
        }

        .screen {
            display: none;
        }

        .active {
            display: block;
        }

        .tests-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .test-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .test-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: #3498db;
            background: white;
        }

        .test-card.selected {
            border-color: #27ae60;
            background: #e8f6f3;
        }

        .test-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .test-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .test-info {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 15px;
        }

        .test-stats {
            display: flex;
            justify-content: space-around;
            font-size: 12px;
            color: #95a5a6;
        }

        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .btn-start {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            font-size: 18px;
            padding: 15px 40px;
        }

        .question-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 10px;
            margin: 15px 0;
            border: 3px solid #e9ecef;
        }

        .question-text {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .options-container {
            display: grid;
            gap: 12px;
            margin: 20px 0;
        }

        .option-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-size: 16px;
        }

        .option-btn:hover {
            background: #e9ecef;
            border-color: #3498db;
        }

        .option-btn.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .option-btn.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .progress-bar {
            background: #ecf0f1;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            height: 100%;
            width: 0%;
            transition: width 0.3s;
        }

        .test-description {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #e8f4fd;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .shuffle-notice {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì –¢—Ä–µ–Ω–∞–∂–µ—Ä –¥–ª—è —Å–µ—Å—Å–∏–∏</h1>
            <p>–í—ã–±–µ—Ä–∏ —Ç–µ—Å—Ç –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ - –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è!</p>
        </div>

        <div class="content">
            <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ç–µ—Å—Ç–∞ -->
            <div id="selectScreen" class="screen active">
                <h2>–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ—Å—Ç—ã</h2>
                
                <div class="test-description">
                    <strong>‚ö° –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è!</strong><br>
                    –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥ –ª—é–±–æ–π –±—É–∫–≤–æ–π - —É—á–∏—Å—å –ø–æ–Ω–∏–º–∞—Ç—å —Å—É—Ç—å, –∞ –Ω–µ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏!
                </div>

                <div class="tests-grid" id="testsGrid">
                    <!-- –¢–µ—Å—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å —á–µ—Ä–µ–∑ JavaScript -->
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-start" id="startTestBtn" disabled>–ù–∞—á–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç</button>
                </div>
            </div>

            <!-- –≠–∫—Ä–∞–Ω —Ç–µ—Å—Ç–∞ -->
            <div id="testScreen" class="screen">
                <div style="text-align: center; margin: 20px 0;">
                    <div id="testName" style="font-size: 18px; font-weight: 600; color: #2c3e50;"></div>
                    –í–æ–ø—Ä–æ—Å <span id="currentQuestion">1</span> –∏–∑ <span id="totalQuestions">20</span>
                </div>
                
                <div class="progress-bar">
                    <div class="progress" id="progressBar"></div>
                </div>

                <div class="shuffle-notice">
                    üîÄ –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –ø–µ—Ä–µ–º–µ—à–∞–Ω—ã! –ò—â–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ —Å–º—ã—Å–ª—É, –∞ –Ω–µ –ø–æ –±—É–∫–≤–µ.
                </div>

                <div class="question-container">
                    <div class="question-text" id="questionText"></div>
                    <div id="questionImageContainer"></div>
                    <div class="options-container" id="optionsContainer"></div>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 30px;">
                    <button class="btn" id="backBtn" style="visibility: hidden;">–ù–∞–∑–∞–¥</button>
                    <button class="btn" id="nextBtn" disabled>–î–∞–ª–µ–µ</button>
                </div>
            </div>

            <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
            <div id="resultsScreen" class="screen">
                <div style="text-align: center;">
                    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞</h2>
                    <div id="resultTestName" style="font-size: 16px; color: #7f8c8d; margin-bottom: 20px;"></div>
                    
                    <div style="width: 150px; height: 150px; border-radius: 50%; background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; margin: 0 auto 30px; font-size: 24px; font-weight: bold;">
                        <span id="scorePercent">0%</span>
                        <span style="font-size: 16px; font-weight: normal;">–ø—Ä–∞–≤–∏–ª—å–Ω–æ</span>
                    </div>
                    
                    <p>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <strong id="correctAnswers">0</strong> –∏–∑ <strong id="totalAnswers">20</strong></p>
                    
                    <div style="margin-top: 30px;">
                        <button class="btn" id="restartBtn">–ü—Ä–æ–π—Ç–∏ –µ—â–µ —Ä–∞–∑</button>
                        <button class="btn" id="newTestBtn">–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç–µ—Å—Ç</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class QuizApp {
            constructor() {
                this.tests = [];
                this.selectedTest = null;
                this.questions = [];
                this.currentQuestionIndex = 0;
                this.score = 0;
                this.userAnswers = [];
                this.totalQuestions = 20;
                this.correctAnswersMap = [];
                
                this.initializeEventListeners();
                this.loadAvailableTests();
            }

            initializeEventListeners() {
                document.getElementById('startTestBtn').addEventListener('click', () => {
                    this.startSelectedTest();
                });

                document.getElementById('nextBtn').addEventListener('click', () => {
                    this.nextQuestion();
                });

                document.getElementById('backBtn').addEventListener('click', () => {
                    this.previousQuestion();
                });

                document.getElementById('restartBtn').addEventListener('click', () => {
                    this.startSelectedTest();
                });

                document.getElementById('newTestBtn').addEventListener('click', () => {
                    this.showScreen('selectScreen');
                });
            }

            loadAvailableTests() {
                this.tests = [
                    {
                        id: 1,
                        name: "üìä –¢–µ—Å—Ç –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ",
                        description: "–ê–ª–≥–µ–±—Ä–∞, –≥–µ–æ–º–µ—Ç—Ä–∏—è, –æ—Å–Ω–æ–≤—ã –∞–Ω–∞–ª–∏–∑–∞",
                        icon: "üßÆ",
                        questions: 45,
                        time: "30 –º–∏–Ω",
                        questions: [
                            {
                                question: "–ß–µ–º—É —Ä–∞–≤–Ω–æ 2 + 2 √ó 2?",
                                options: ["6", "8", "4", "10"],
                                correctAnswer: "6"
                            },
                            {
                                question: "–ß—Ç–æ —Ç–∞–∫–æ–µ –≥–∏–ø–æ—Ç–µ–Ω—É–∑–∞?",
                                options: [
                                    "–°—Ç–æ—Ä–æ–Ω–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞",
                                    "–£–≥–æ–ª –≤ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ", 
                                    "–ü–µ—Ä–∏–º–µ—Ç—Ä –∫—Ä—É–≥–∞",
                                    "–î–∏–∞–º–µ—Ç—Ä –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏"
                                ],
                                correctAnswer: "–°—Ç–æ—Ä–æ–Ω–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞"
                            },
                            {
                                question: "–§–æ—Ä–º—É–ª–∞ –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞–Ω—Ç–∞?",
                                options: [
                                    "b¬≤ - 4ac",
                                    "a¬≤ + b¬≤", 
                                    "2œÄr",
                                    "(a+b)¬≤"
                                ],
                                correctAnswer: "b¬≤ - 4ac"
                            },
                            {
                                question: "–ß–µ–º—É —Ä–∞–≤–Ω–æ œÄ (–ø–∏) —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ –¥–≤—É—Ö –∑–Ω–∞–∫–æ–≤?",
                                options: ["3.14", "2.71", "1.41", "1.61"],
                                correctAnswer: "3.14"
                            }
                        ]
                    },
                    {
                        id: 2,
                        name: "üíª –¢–µ—Å—Ç –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é",
                        description: "–û—Å–Ω–æ–≤—ã –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –∏ —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è",
                        icon: "üë®‚Äçüíª",
                        questions: 35,
                        time: "25 –º–∏–Ω",
                        questions: [
                            {
                                question: "–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏?",
                                options: [
                                    "–ò–º–µ–Ω–æ–≤–∞–Ω–Ω–∞—è —è—á–µ–π–∫–∞ –ø–∞–º—è—Ç–∏",
                                    "–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö", 
                                    "–§—É–Ω–∫—Ü–∏—è",
                                    "–¶–∏–∫–ª"
                                ],
                                correctAnswer: "–ò–º–µ–Ω–æ–≤–∞–Ω–Ω–∞—è —è—á–µ–π–∫–∞ –ø–∞–º—è—Ç–∏"
                            },
                            {
                                question: "–ö–∞–∫–æ–π —è–∑—ã–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü?",
                                options: ["HTML", "Python", "C++", "Java"],
                                correctAnswer: "HTML"
                            },
                            {
                                question: "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –û–û–ü?",
                                options: [
                                    "–û–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
                                    "–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥—Ä–∞–º–º",
                                    "–û—Å–Ω–æ–≤—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤",
                                    "–û–±—â–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏"
                                ],
                                correctAnswer: "–û–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"
                            }
                        ]
                    },
                    {
                        id: 3,
                        name: "üåç –¢–µ—Å—Ç –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏",
                        description: "–°—Ç—Ä–∞–Ω—ã, —Å—Ç–æ–ª–∏—Ü—ã, —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—è",
                        icon: "üó∫Ô∏è",
                        questions: 50,
                        time: "35 –º–∏–Ω",
                        questions: [
                            {
                                question: "–°—Ç–æ–ª–∏—Ü–∞ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏?",
                                options: ["–ö–∞–Ω–±–µ—Ä—Ä–∞", "–°–∏–¥–Ω–µ–π", "–ú–µ–ª—å–±—É—Ä–Ω", "–ü–µ—Ä—Ç"],
                                correctAnswer: "–ö–∞–Ω–±–µ—Ä—Ä–∞"
                            },
                            {
                                question: "–°–∞–º–∞—è –¥–ª–∏–Ω–Ω–∞—è —Ä–µ–∫–∞ –≤ –º–∏—Ä–µ?",
                                options: ["–ù–∏–ª", "–ê–º–∞–∑–æ–Ω–∫–∞", "–Ø–Ω—Ü–∑—ã", "–ú–∏—Å—Å–∏—Å–∏–ø–∏"],
                                correctAnswer: "–ù–∏–ª"
                            },
                            {
                                question: "–°–∞–º–∞—è –≤—ã—Å–æ–∫–∞—è –≥–æ—Ä–∞ –≤ –º–∏—Ä–µ?",
                                options: ["–≠–≤–µ—Ä–µ—Å—Ç", "–ö–∏–ª–∏–º–∞–Ω–¥–∂–∞—Ä–æ", "–ú–æ–Ω–±–ª–∞–Ω", "–≠–ª—å–±—Ä—É—Å"],
                                correctAnswer: "–≠–≤–µ—Ä–µ—Å—Ç"
                            }
                        ]
                    },
                    {
                        id: 4,
                        name: "üìö –¢–µ—Å—Ç –ø–æ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ",
                        description: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞",
                        icon: "üìñ",
                        questions: 40,
                        time: "30 –º–∏–Ω",
                        questions: [
                            {
                                question: "–ê–≤—Ç–æ—Ä '–í–æ–π–Ω—ã –∏ –º–∏—Ä–∞'?",
                                options: ["–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π", "–§—ë–¥–æ—Ä –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π", "–ê–Ω—Ç–æ–Ω –ß–µ—Ö–æ–≤", "–ò–≤–∞–Ω –¢—É—Ä–≥–µ–Ω–µ–≤"],
                                correctAnswer: "–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π"
                            },
                            {
                                question: "–ö—Ç–æ –Ω–∞–ø–∏—Å–∞–ª '–ì–∞–º–ª–µ—Ç–∞'?",
                                options: ["–®–µ–∫—Å–ø–∏—Ä", "–î–∞–Ω—Ç–µ", "–ì—ë—Ç–µ", "–ë–∞–π—Ä–æ–Ω"],
                                correctAnswer: "–®–µ–∫—Å–ø–∏—Ä"
                            },
                            {
                                question: "–ì–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π '–ï–≤–≥–µ–Ω–∏—è –û–Ω–µ–≥–∏–Ω–∞'?",
                                options: ["–ï–≤–≥–µ–Ω–∏–π –û–Ω–µ–≥–∏–Ω", "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü—É—à–∫–∏–Ω", "–í–ª–∞–¥–∏–º–∏—Ä –õ–µ–Ω—Å–∫–∏–π", "–ü—ë—Ç—Ä –ì—Ä–∏–Ω—ë–≤"],
                                correctAnswer: "–ï–≤–≥–µ–Ω–∏–π –û–Ω–µ–≥–∏–Ω"
                            }
                        ]
                    },
                    {
                        id: 5,
                        name: "üî¨ –¢–µ—Å—Ç –ø–æ –±–∏–æ–ª–æ–≥–∏–∏",
                        description: "–ë–æ—Ç–∞–Ω–∏–∫–∞, –∑–æ–æ–ª–æ–≥–∏—è, –∞–Ω–∞—Ç–æ–º–∏—è",
                        icon: "üî¨",
                        questions: 55,
                        time: "40 –º–∏–Ω",
                        questions: [
                            {
                                question: "–°–∫–æ–ª—å–∫–æ —Ö—Ä–æ–º–æ—Å–æ–º —É —á–µ–ª–æ–≤–µ–∫–∞?",
                                options: ["46", "23", "48", "52"],
                                correctAnswer: "46"
                            },
                            {
                                question: "–ß—Ç–æ —Ç–∞–∫–æ–µ –º–∏—Ç–æ–∑?",
                                options: [
                                    "–î–µ–ª–µ–Ω–∏–µ –∫–ª–µ—Ç–∫–∏",
                                    "–§–æ—Ç–æ—Å–∏–Ω—Ç–µ–∑", 
                                    "–î—ã—Ö–∞–Ω–∏–µ",
                                    "–ü–∏—Ç–∞–Ω–∏–µ"
                                ],
                                correctAnswer: "–î–µ–ª–µ–Ω–∏–µ –∫–ª–µ—Ç–∫–∏"
                            },
                            {
                                question: "–ö–∞–∫–æ–π –æ—Ä–≥–∞–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏–µ?",
                                options: ["–°–µ—Ä–¥—Ü–µ", "–ü–µ—á–µ–Ω—å", "–õ—ë–≥–∫–∏–µ", "–ü–æ—á–∫–∏"],
                                correctAnswer: "–°–µ—Ä–¥—Ü–µ"
                            }
                        ]
                    }
                ];

                this.renderTestsGrid();
            }

            renderTestsGrid() {
                const grid = document.getElementById('testsGrid');
                grid.innerHTML = '';

                this.tests.forEach(test => {
                    const testCard = document.createElement('div');
                    testCard.className = 'test-card';
                    testCard.innerHTML = `
                        <div class="test-icon">${test.icon}</div>
                        <div class="test-title">${test.name}</div>
                        <div class="test-info">${test.description}</div>
                        <div class="test-stats">
                            <span>‚ùì ${test.questions} –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                            <span>‚è±Ô∏è ${test.time}</span>
                        </div>
                    `;
                    
                    testCard.addEventListener('click', () => {
                        this.selectTest(test);
                    });
                    
                    grid.appendChild(testCard);
                });
            }

            selectTest(test) {
                document.querySelectorAll('.test-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                event.currentTarget.classList.add('selected');
                this.selectedTest = test;
                document.getElementById('startTestBtn').disabled = false;
            }

            shuffleArray(array) {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }

            startSelectedTest() {
                if (!this.selectedTest) return;
                
                this.questions = this.selectedTest.questions;
                this.currentQuestionIndex = 0;
                this.score = 0;
                this.userAnswers = [];
                this.correctAnswersMap = [];
                
                this.testQuestions = this.getRandomQuestions();
                this.showQuestion();
                this.showScreen('testScreen');
                this.updateProgress();
                
                document.getElementById('testName').textContent = this.selectedTest.name;
                document.getElementById('resultTestName').textContent = this.selectedTest.name;
            }

            getRandomQuestions() {
                const shuffled = [...this.questions].sort(() => Math.random() - 0.5);
                const selected = shuffled.slice(0, this.totalQuestions);
                
                return selected.map(question => {
                    const originalCorrectAnswer = question.correctAnswer;
                    
                    // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
                    const shuffledOptions = this.shuffleArray(question.options);
                    
                    // –ù–∞—Ö–æ–¥–∏–º –Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è
                    const newCorrectIndex = shuffledOptions.indexOf(originalCorrectAnswer);
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è —ç—Ç–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
                    this.correctAnswersMap.push(newCorrectIndex);
                    
                    return {
                        question: question.question,
                        options: shuffledOptions,
                        correctIndex: newCorrectIndex
                    };
                });
            }

            showQuestion() {
                const questionData = this.testQuestions[this.currentQuestionIndex];
                document.getElementById('questionText').textContent = questionData.question;
                
                const optionsContainer = document.getElementById('optionsContainer');
                optionsContainer.innerHTML = '';

                questionData.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.className = 'option-btn';
                    button.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                    button.addEventListener('click', () => this.selectAnswer(index));
                    optionsContainer.appendChild(button);
                });

                document.getElementById('currentQuestion').textContent = this.currentQuestionIndex + 1;
                document.getElementById('totalQuestions').textContent = this.testQuestions.length;
                document.getElementById('nextBtn').disabled = true;
                
                document.getElementById('backBtn').style.visibility = 
                    this.currentQuestionIndex > 0 ? 'visible' : 'hidden';
            }

            selectAnswer(selectedIndex) {
                const options = document.querySelectorAll('.option-btn');
                const correctIndex = this.correctAnswersMap[this.currentQuestionIndex];
                
                this.userAnswers[this.currentQuestionIndex] = selectedIndex;

                options.forEach((btn, index) => {
                    btn.disabled = true;
                    if (index === correctIndex) {
                        btn.classList.add('correct');
                    } else if (index === selectedIndex && selectedIndex !== correctIndex) {
                        btn.classList.add('incorrect');
                    }
                });

                if (selectedIndex === correctIndex) {
                    this.score++;
                }

                document.getElementById('nextBtn').disabled = false;
            }

            nextQuestion() {
                this.currentQuestionIndex++;
                
                if (this.currentQuestionIndex < this.testQuestions.length) {
                    this.showQuestion();
                } else {
                    this.showResults();
                }
                this.updateProgress();
            }

            previousQuestion() {
                if (this.currentQuestionIndex > 0) {
                    this.currentQuestionIndex--;
                    this.showQuestion();
                    this.updateProgress();
                }
            }

            updateProgress() {
                const progress = ((this.currentQuestionIndex + 1) / this.testQuestions.length) * 100;
                document.getElementById('progressBar').style.width = `${progress}%`;
            }

            showResults() {
                const percent = Math.round((this.score / this.testQuestions.length) * 100);
                
                document.getElementById('scorePercent').textContent = `${percent}%`;
                document.getElementById('correctAnswers').textContent = this.score;
                document.getElementById('totalAnswers').textContent = this.testQuestions.length;
                
                this.showScreen('resultsScreen');
            }

            showScreen(screenName) {
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(screenName).classList.add('active');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new QuizApp();
        });
    </script>
</body>
</html>
